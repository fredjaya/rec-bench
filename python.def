# https://public.confluence.arizona.edu/display/UAHPC/Singularity+Tutorials#SingularityTutorials-CentOSwithTensorflowExample

BootStrap: yum
OSVersion: 7
MirrorURL: http://mirror.centos.org/centos-%{OSVERSION}/%{OSVERSION}/os/$basearch/
Include: yum wget

%post
    # commands to be executed inside container during bootstrap
    # add python and install some packages
    yum -y install vim wget python3 epel-release
    yum -y install python-pip
     # install dependencies
    pip install --upgrade pip
    pip install matplotlib re sys
     # create bind points for storage.
     mkdir /extra
     mkdir /xdisk
     exit 0
 %runscript
   # commands to be executed when the container runs
   echo "Arguments received: $*"
   exec /usr/bin/python3 "$@"
 %test
   # commands to be executed within container at close of bootstrap process
   python -V
   pip -V
