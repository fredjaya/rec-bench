manifest {
  name = 'fredjaya/rec-bench'
  author = 'Fred Jaya'
  homePage = 'https://github.com/fredjaya/rec-bench'
  description = 'Benchmarking of recombination detection methods using SANTA-SIM'
}

// Params
params.out = "${baseDir}/out"
params.bin = "${baseDir}/bin"
params.trace = "${params.out}/tracing"
params.mode = 'none'
params.seq = 'none'
params.xml = 'none'
params.sim_fa = 'none'

process {
    
    withLabel: local {
        executor = 'local'
        cpus = 2
        memory = 4.GB
  }

    withLabel: sim_benchmark {
        errorStrategy = { task.exitStatus == 143 ? 'ignore' : 'ignore' }
        executor = 'pbs'
        cpus = 1
        memory = 16.GB
        time = '24h'
    }
    
    withLabel: slurm {
        errorStrategy = { task.exitStatus == 143 ? 'ignore' : 'ignore' }
        executor = 'slurm'
        cpus = 1
        memory = 8.GB
        time = '24h'
    }

    withLabel: empirical {
        executor = 'pbs'
        cpus = 1
        memory = 64.GB
        time = '125h'
    }

}

trace {
  enabled = true
  sep = ','
}

timeline {
  enabled = true
}

dag {
    enabled = true
}

report {
    enabled = true
}
